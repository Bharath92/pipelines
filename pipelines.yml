resources:
  - name: dockergit
    type: GitRepo
    configuration:
      path: bharath92/sample-runsh
      gitProvider: github
      branches:
        include: master
pipelines:
  - name: podman_docker
    steps:
      - name: podman_docker_build
        type: DockerBuild
#         execution:
#           onStart:
#             - ls # this is required because jfrog rt docker-push needs a docker binary to be present in $PATH to work
        configuration:
          affinityGroup: podman
          dockerFileLocation: .
          dockerFileName: Dockerfile
          dockerImageName: ddddc267430c.ngrok.io/bharathdocker/test
          dockerImageTag: ${run_number}
          integrations:
            - name: localart
          inputResources:
            - name: dockergit
#             type: image
#             image:
#               custom:
#                 name: localhost/podmaninsideimage
#                 tag: 0.0.2
#                 autoPull: false
      - name: podman_docker_push
        type: DockerPush
        configuration:
          affinityGroup: podman
          targetRepository: bharathdocker
          integrations:
            - name: localart
          inputSteps:
            - name: podman_docker_build
#         execution:
#           onStart:
#             - ls # this is required because jfrog rt docker-push needs a docker binary to be present in $PATH to work
